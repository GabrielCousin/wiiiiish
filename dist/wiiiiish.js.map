{"version":3,"sources":["wiiiiish.js"],"names":["Wiiiiish","options","$wishText","classList","add","newIndex","Math","floor","random","wishes","length","currentIndex","letters","split","chunks","reduce","accumulator","currentValue","chunk","push","forEach","i","timeouts","setTimeout","innerHTML","pause","clearTimeout","document","querySelectorAll","targetSelector","span","remove","selectText","clear","removeText","removalDelay","addText","addDuration","Object","assign","itemsSelector","triggerSelector","$trigger","querySelector","wish","addEventListener","updateText"],"mappings":"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","file":"wiiiiish.js","sourceRoot":"../src","sourcesContent":["export default class Wiiiiish {\n  timeouts = []\n  wishes = []\n\n  constructor(options) {\n    this.options = Object.assign({\n      itemsSelector: '#w-list',\n      targetSelector: '#w-container',\n      triggerSelector: '#w-trigger',\n      removalDelay: 300,\n      addDuration: 700,\n      pause: 100\n    }, options)\n\n    this.$trigger = document.querySelector(this.options.triggerSelector)\n    this.$wishText = document.querySelector(this.options.targetSelector)\n\n    document.querySelectorAll(`${this.options.itemsSelector} li`).forEach((wish) => {\n      this.wishes.push(wish.innerHTML)\n    })\n\n    this.$trigger.addEventListener('click', this.updateText, false)\n  }\n\n  addText = () => {\n    this.$wishText.classList.add('is-typing')\n\n    let newIndex = Math.floor(Math.random() * this.wishes.length)\n\n    while (this.currentIndex === newIndex) {\n      newIndex = Math.floor(Math.random() * this.wishes.length)\n    }\n\n    this.currentIndex = newIndex\n\n    let letters = this.wishes[newIndex].split('')\n    let chunks = []\n\n    letters[0] = `<span>${letters[0]}</span>`\n\n    letters.reduce(function (accumulator, currentValue) {\n      const chunk = `${accumulator}<span>${currentValue}</span>`\n      chunks.push(chunk)\n      return chunk\n    })\n\n    chunks.forEach((chunk, i) => {\n      this.timeouts.push(setTimeout(() => {\n        this.$wishText.innerHTML = chunk\n      }, i * this.options.pause))\n    })\n  }\n\n  clear = () => {\n    for (let i = 0; i < this.timeouts.length; i++) {\n      clearTimeout(this.timeouts[i])\n    }\n  }\n\n  removeText = () => {\n    this.$wishText.innerHTML = ''\n  }\n\n  selectText = () => {\n    document.querySelectorAll(`${this.options.targetSelector} span`).forEach((span) => {\n      span.classList.add('is-selected')\n    })\n  }\n\n  updateText = () => {\n    this.$wishText.classList.remove('is-typing')\n\n    this.selectText()\n    this.clear()\n\n    this.timeouts = [\n      setTimeout(this.removeText, this.options.removalDelay),\n      setTimeout(this.addText, this.options.removalDelay + this.options.addDuration)\n    ]\n  }\n}\n"]}